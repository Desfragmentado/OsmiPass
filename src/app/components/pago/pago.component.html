<div class="container">
  <form class="payment-form" #paymentForm="ngForm" novalidate>
    <h2>Datos del Cliente</h2>

    <div class="form-group">
      <label for="fullName">Nombre Completo</label>
      <input
        type="text"
        id="fullName"
        [(ngModel)]="customerName"
        name="fullName"
        placeholder="Guadalupe Bustamante Salvador"
        required
      />
    </div>

    <div class="form-group">
      <label for="email">Correo Electrónico</label>
      <input
        type="email"
        id="email"
        [(ngModel)]="customerEmail"
        name="email"
        placeholder="osmipass1405@gmail.com"
        required
      />
    </div>

    <div class="checkbox-group">
      <input
        type="checkbox"
        id="terms"
        [(ngModel)]="termsAccepted"
        name="terms"
        required
      />
      <label for="terms">
        He leído y estoy de acuerdo con los
        <a href="#" class="terms-link">Términos y Condiciones</a> y
        <a href="#" class="terms-link">Aviso de Privacidad.</a>
      </label>
    </div>

    <div id="stripe-button-container" *ngIf="termsAccepted">
      <button
        type="button"
        class="stripe-button"
        (click)="handleStripePayment()"
        [disabled]="!isFormValid() || loading"
      >
        {{ loading ? 'Procesando...' : 'Pagar $' + getTotalAmount() + ' MXN' }}
      </button>
    </div>

    <div id="paypal-button-container"></div>
  </form>

  <div class="order-summary">
    <h2>Resumen de Compra</h2>

    <div class="ticket-info" *ngIf="ticketData">
      <p>Evento: <strong>{{ ticketData.event.title }}</strong></p>
      <p>Fecha: <strong>{{ ticketData.event.date }}</strong></p>
      <p>Lugar: <strong>{{ ticketData.event.venue }}</strong></p>
      <p>Folio: <strong>{{ ticketData.folio }}</strong></p>
      <p>Precio Total: <strong>${{ ticketData.price }} MXN</strong></p>
    </div>

    <div class="price-details" *ngIf="ticketData">
      <p>Boletos: ${{ ticketData.price }}</p>
      <p>Cargos por servicio: $50.00</p>
      <p class="total">Total: ${{ getTotalAmount() }} MXN</p>
    </div>

    <div class="timer-section">
      <p>Tiempo restante: <span id="countdown">05:00</span></p>
    </div>
  </div>
</div>